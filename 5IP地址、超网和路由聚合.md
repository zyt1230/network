 

一、路由概述
------

### 1.路由的作用

*   在不同网段之间转发数据，需要有路由器的支持
*   默认情况下，路由器只知道跟它直连的网段，非直连的网段需要通过静态路由、动态路由告诉它
    *   静态路由  
        管理员**手动添加路由信息**。  
        适用于**小规模网络**。
    *   动态路由  
        路由器通过**路由选择协议（比如RIP、OSPF）自动获取路由信息**。  
        适用于**大规模网络**。

### 2.[数据包](https://so.csdn.net/so/search?q=%E6%95%B0%E6%8D%AE%E5%8C%85&spm=1001.2101.3001.7020)的传送过程

从H1到H2的数据包，数据包在[网络层](https://so.csdn.net/so/search?q=%E7%BD%91%E7%BB%9C%E5%B1%82&spm=1001.2101.3001.7020)和网络接口层的传输过程。

*   在数据包的传送过程中，数据包的源IP地址和目的IP地址保持不变；
*   在数据包的传送过程中，数据包的源MAC地址和目的MAC地址 **逐链路（或逐网络）** 改变。  
    ![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/8837630b7d8e49fb828e244a9a55d6c7.png)

二、因特网的私网和公网
-----------

### 1.因特网的接入方式

#### 1.1电话线入户

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/65877959d0004c5d8f89d0153c35345e.png)

#### 1.2 光纤入户

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/7d9e19aaaf1340a9860e64487f3c72b9.png)

*   光猫（optical modem），光调制解调器，**进行数字信号和光信号的转换** 。
*   WAN口（广域网口）：**连接外部网络，负责与互联网通信**。
*   LAN口（局域网口）：**连接内部设备，负责局域网内通信**。

### 2.公网和私网

**因特网才有公网和私网**。**路由器不能转发私有IP**。

#### 2.1 公网

*   Internet上路由器中只有到达公网的路由表，没有到达私网的路由表。
*   公网IP由因特网信息中心（Internet Network Information Center，Inter NIC）统⼀分配和管理 。

#### 2.2 私网

*   主要用于局域网
*   有3类：
    *   A：10.0.0.0/8，1个A类网络
    *   B：172.16.0.0/16 ~ 172.31.0.0/16，16个B类网络
    *   C： 192.168.0.0/24 ~ 192.168.255.0/24，256个C类网络

> 10.0.0.0 - 10.255.255.255  
> 172.16.0.0 - 172.31.255.255  
> 192.168.0.0 - 192.168.255.255

公网：全球可访问，使用公网IP，用于对外服务。  
私网：内部使用，使用私有IP，用于内部通信。

三、NAT技术
-------

路由器不能转发私有IP 。那么为了让它能转发，就需要NAT技术。

### 1.NAT的作用

*   **私网IP**访问Internet用进行NAT转换为**公网IP**
*   这⼀步可以由**路由器来完成**

### 2.NAT的特点

*   可以节约公网IP资源
*   会隐藏内部真实IP

### 3.NAT分类

*   静态转换，手动配置NAT映射表
*   动态转换，定义外部地址池，动态随机转换，**⼀对⼀转换**
*   PAT（**Port** Address Translation），**多对⼀转换**
    *   采用端口多路复用技术

> 虽然NAT可以把私网IP转为一个公网IP，但是公网IP有限,且容易发生重复的公网IP（如果A设备和B设备都要转发私网IP，就需要使用NAT转发公网IP，但是它们都用的同一个公网IP，路由器就会发生问题。），就发明了PAT，在IP后面加上端口，例如：61.3.5.6:81

本文转自 <https://blog.csdn.net/2401_82911768/article/details/145710710?spm=1001.2014.3001.5502>，如有侵权，请联系删除。