 

一、为什么使用cookie和session？
----------------------

**HTTP 协议是⼀种无状态协议**，即**每次服务端接收到客户端的请求时，都是⼀个全新的请求，服务器并不知道客户端的历史请求记录**；Session 和 Cookie 的主要目的就是为了弥补 HTTP 的无状态特性。

二、cookie
--------

### 1、了解Cookie

HTTP协议中的cookie是Web Cookie 和 浏览器Cookie。

**定义**：**它是服务器发送到 Web 浏览器的一小块数据**。服务器发送到浏览器的 Cookie，**浏览器会进行存储**，并与下一个请求一起发送到服务器。

**作用**：**它用于判断两个请求是否来自于同一个浏览器，用于在`客户端`保存用户状态信息（如用户 ID、偏好设置）**，例如用户保持登录状态。

> *   ### Cookie主要用于3个目的
>     
>     *   ### 会话管理
>         
>         *   登陆、购物车、游戏得分或者服务器应该记住的其他内容。
>     *   ### 个性化
>         
>         *   用户偏好、主题或者其他设置。
>     *   ### 追踪
>         
>         *   记录和分析用户行为。

> *   ### Cookie类型
>     
>     *   ### 会话Cookie
>         
>         *   它**不包含到期日期**，它**存储在内存中**，永远不会写入磁盘。所以浏览器关闭时，此后Cookie会永久丢失。
>     *   ### 持久性Cookie
>         
>         *   它**包含到期日期**。到指定日期会在**磁盘中删除**。

### 2、Cookie的过程

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/e223978aede340acad3b451dbe4ef70e.png)  
当接收到[客户端](https://so.csdn.net/so/search?q=%E5%AE%A2%E6%88%B7%E7%AB%AF&spm=1001.2101.3001.7020)发出的 HTTP 请求时，服务器可以发送带有响应的 Set-Cookie 标头， Cookie 通常由浏览器存储，然后将 Cookie 与 HTTP 标头一同向服务器发出请求。【**可以理解成**：客户发送东西到服务器，但是服务器不认识客户端，就为客户端生成了Cookie识别码，而这个Cookie识别码是用set-Cookie创建的，set-Cookie是放在HTTP的响应报文里的。客户接受到了，再向服务器发送时，HTTP的请求报文里就有了Cookie识别码了。】

*   Set-Cookie 和 Cookie 标头：
    *   Set-Cookie HTTP 响应标头**将 cookie 从服务器发送到用户代理**。
    *   此标头告诉客户端存储 Cookie。
    *   现在，随着对服务器的每个新请求，浏览器将使用 Cookie 头**将所有以前存储的 Cookie 发送回服务器**。

> **注意**： 如果Cookie里存储了许多用户状态信息，就容易被人盗取（Cookie欺骗）。所以后来发明了方法，不把用户状态数据存在客户端，放到服务器里（会有小仓库session来存储）【可能有许多session小仓库，因为不同的客户端等等】。

三、session
---------

### 1、session了解

**定义**：Session 是`服务器端`存储的用户状态信息，通常与客户端的 Cookie 配合使用。

**作用**：用于在`服务器端`保存用户状态信息（如购物车数据、登录信息）。【**容易导致服务器压力大，所以信息会像Cookie一样有时效性。到一定时间久自动删除**】

> *   ### session如何判断是否是同一会话
>     
>     *   如果存储在了服务器里，那么客户端需要使用时，如何分辨出是服务器的哪一个Session内存呢？
>     *   Cookie会创建session\_id的身份证明给客户端。用于区分。  
>         ![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/8eadc97d83b248538e5ad1646e6e2568.png)

四、Web缓存
-------

### 1、理解

`万维网缓存`又称为`Web缓存`（Web Cache）也叫`代理服务器缓存`，可位于客户机，也可位于中间系统上，**位于中间系统上的Web缓存又称为`代理服务器`**（Proxy Server）。  
**作用**：用于存储 Web 资源（如 HTML 页面、图片、CSS、JavaScript 文件等）的机制，目的是减少服务器负载、降低网络延迟并提升用户体验。

> **注意**：Web缓存有自己的磁盘空间

### 2、Web缓存过程

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/5ba797f40b6143bd93a77ab20ddf7f23.png)

*   `Web 缓存`可以在用户的浏览器中进行配置，一旦配置后，用户`首先访问`的就`不是初始服务器`了，需要先访问`代理服务器`判断请求的`对象是否存在`，如果代理服务器`没有`，再由`代理服务器来请求初始服务器`把对象返回给客户，同时在自己的磁盘空间保存对象。

> **注意**：这里的客户和初始服务器是C/S 模式。但是代理服务器是P2P模式。

本文转自 <https://blog.csdn.net/2401_82911768/article/details/146148859?spm=1001.2014.3001.5502>，如有侵权，请联系删除。